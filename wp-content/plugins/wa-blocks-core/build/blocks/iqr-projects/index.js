(()=>{"use strict";var e,t={389:(e,t,l)=>{const r=window.wp.blocks,o=window.React,a=(window.wp.i18n,JSON.parse('{"UU":"wa-blocks/iqr-projects"}')),n=window.wp.blockEditor,c=window.wp.serverSideRender;var s=l.n(c);const i=window.wp.element,u=window.wp.components,p=window.wp.primitives,d=(0,o.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(p.Path,{d:"M2 12C2 6.44444 6.44444 2 12 2C17.5556 2 22 6.44444 22 12C22 17.5556 17.5556 22 12 22C6.44444 22 2 17.5556 2 12ZM13 11V7H11V11H7V13H11V17H13V13H17V11H13Z"})),v=window.wp.apiFetch;var b=l.n(v);(0,r.registerBlockType)(a.UU,{attributes:{selectedProjects:{type:"array",default:[]},blockTitle:{type:"string",default:""},blockLink:{type:"string",default:""}},edit:function({attributes:e,setAttributes:t}){const[l,r]=(0,i.useState)(!1),[c,p]=(0,i.useState)(""),[v,w]=(0,i.useState)([]),[m,k]=(0,i.useState)(!0);(0,i.useEffect)((()=>{m&&b()({path:"/wp/v2/iq_realestate?per_page=10"}).then((e=>{w(e.map((e=>({label:e.title.rendered,value:e.id})))),k(!1)}))}),[m]);const g=()=>{r(!0)};return(0,o.createElement)("div",{...(0,n.useBlockProps)()},(0,o.createElement)(n.BlockControls,null,(0,o.createElement)(u.ToolbarGroup,null,(0,o.createElement)(u.ToolbarButton,{icon:d,label:"Agregar proyecto",onClick:g,text:"Agregar proyecto"}))),(0,o.createElement)(n.InspectorControls,null,(0,o.createElement)(u.PanelBody,{title:"Configuración del bloque"},(0,o.createElement)(u.TextControl,{label:"Título de la sección",value:e.blockTitle||"",onChange:e=>t({blockTitle:e})}),(0,o.createElement)(u.TextControl,{label:"URL de la sección",value:e.blockLink||"",onChange:e=>t({blockLink:e})})),(0,o.createElement)(u.PanelBody,{title:"Proyectos seleccionados"},(0,o.createElement)("ul",null,e.selectedProjects&&e.selectedProjects.map((l=>(0,o.createElement)("li",{key:l.value},l.label,(0,o.createElement)(u.Button,{isDestructive:!0,onClick:()=>{return r=l.value,void t({selectedProjects:e.selectedProjects.filter((e=>e.value!==r))});var r}},"Quitar"))))),(0,o.createElement)(u.Button,{variant:"primary",onClick:g},"Agregar proyecto"))),l&&(0,o.createElement)(u.Modal,{title:"Seleccionar proyectos",onRequestClose:()=>r(!1)},(0,o.createElement)("input",{type:"text",placeholder:"Buscar proyectos",value:c,onChange:e=>{return t=e.target.value,p(t),void(t.length>2?(e=>{b()({path:`/wp/v2/iq_realestate?search=${e}`}).then((e=>{w(e.map((e=>({label:e.title.rendered,value:e.id}))))}))})(t):0===t.length&&k(!0));var t}}),(0,o.createElement)("ul",null,v.map((l=>(0,o.createElement)("li",{key:l.value,onClick:()=>(l=>{if(!e.selectedProjects.some((e=>e.value===l))){const r=v.find((e=>e.value===l));r&&t({selectedProjects:[...e.selectedProjects,r]})}})(l.value),style:{cursor:"pointer",backgroundColor:e.selectedProjects.some((e=>e.value===l.value))?"#e0e0e0":"transparent"}},l.label,e.selectedProjects.some((e=>e.value===l.value))&&" ✅"))))),(0,o.createElement)(u.Disabled,null,(0,o.createElement)(s(),{block:a.UU,skipBlockSupportAttributes:!0,attributes:e})))}})}},l={};function r(e){var o=l[e];if(void 0!==o)return o.exports;var a=l[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,l,o,a)=>{if(!l){var n=1/0;for(u=0;u<e.length;u++){for(var[l,o,a]=e[u],c=!0,s=0;s<l.length;s++)(!1&a||n>=a)&&Object.keys(r.O).every((e=>r.O[e](l[s])))?l.splice(s--,1):(c=!1,a<n&&(n=a));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[l,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var l in t)r.o(t,l)&&!r.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={2790:0,2538:0};r.O.j=t=>0===e[t];var t=(t,l)=>{var o,a,[n,c,s]=l,i=0;if(n.some((t=>0!==e[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var u=s(r)}for(t&&t(l);i<n.length;i++)a=n[i],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},l=globalThis.webpackChunkwa_blocks_core=globalThis.webpackChunkwa_blocks_core||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var o=r.O(void 0,[2538],(()=>r(389)));o=r.O(o)})();