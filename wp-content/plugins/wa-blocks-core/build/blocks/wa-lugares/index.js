(()=>{"use strict";var e,l={347:(e,l,a)=>{const o=window.wp.blocks,c=window.React,t=(window.wp.i18n,window.wp.blockEditor),n=window.wp.components,r=window.wp.element,i=window.wp.apiFetch;var s=a.n(i);const _=window.wp.url,p=JSON.parse('{"UU":"wa-blocks-core/wa-lugares"}');(0,o.registerBlockType)(p.UU,{attributes:{selectedContent:{type:"object",default:null},searchTerm:{type:"string",default:""}},getEditWrapperProps:e=>({"data-place-id":"bar","data-place-latitude":"bar","data-place-longitude":"bar"}),edit:function({attributes:e,setAttributes:l}){const[a,o]=(0,r.useState)(!1),[i,p]=(0,r.useState)(e.selectedContent||null),[b,w]=(0,r.useState)(e.searchTerm||""),[f,u]=(0,r.useState)(!1),[m,d]=(0,r.useState)([]),k=()=>{o(!1)};(0,r.useEffect)((()=>{b&&(async()=>{u(!0);try{const e=await s()({path:`/wp/v2/fp_location?search=${encodeURIComponent(b)}`});d(e)}catch(e){console.error("Error fetching search results:",e)}finally{u(!1)}})()}),[b]);const g=(0,t.useBlockProps)({className:"wa-place-item","data-place-id":`${i&&void 0!==i.id?i.id:0}`,"data-place-latitude":`${i&&void 0!==i.cmb2.fp_location_fields.fp_location_geolocalizacion.latitude?i.cmb2.fp_location_fields.fp_location_geolocalizacion.latitude:0}`,"data-place-longitude":`${i&&void 0!==i.cmb2.fp_location_fields.fp_location_geolocalizacion.longitude?i.cmb2.fp_location_fields.fp_location_geolocalizacion.longitude:0}`});return(0,c.createElement)("div",{...g},i&&(0,c.createElement)("div",{className:"wp-block-wa-blocks-core-wa-lugares__item"},(0,c.createElement)("h3",{className:"wp-block-wa-blocks-core-wa-lugares__item--title"},i.title.rendered),(0,c.createElement)("ul",{className:"wp-block-wa-blocks-core-wa-lugares__info"},i.cmb2.fp_location_fields.fp_location_direccion?(0,c.createElement)("li",null,(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--label"},"Dirección:")," ",(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--value"},i.cmb2.fp_location_fields.fp_location_direccion)):null,i.cmb2.fp_location_fields.fp_location_telefono?(0,c.createElement)("li",null,(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--label"},"Teléfono:")," ",(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--value"},i.cmb2.fp_location_fields.fp_location_telefono)):null,i.cmb2.fp_location_fields.fp_location_web||(0,_.isURL)(i.cmb2.fp_location_fields.fp_location_web)?(0,c.createElement)("li",null,(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--label"},"Sitio Web:")," ",(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--value"},(0,c.createElement)("a",{href:i.cmb2.fp_location_fields.fp_location_web,target:"_blank",rel:"noopener"},(0,_.getAuthority)(i.cmb2.fp_location_fields.fp_location_web)))):null,i.cmb2.fp_location_fields.fp_location_social_networks?(0,c.createElement)("li",{className:"wp-block-wa-blocks-core-wa-lugares__social-networks"},(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--label"},"Redes sociales:")," ",i.cmb2.fp_location_fields.fp_location_social_networks.map(((e,l)=>(0,c.createElement)(c.Fragment,null,(0,c.createElement)("a",{className:`wp-block-wa-blocks-core-wa-lugares__info--value wp-block-wa-blocks-core-wa-lugares__social--${e.social}`,href:e.url,target:"_blank",rel:"noopener",key:l},(0,_.getPath)(e.url).replace(/\/$/,""))," ")))):null)),(0,c.createElement)(n.Button,{onClick:()=>{o(!0),w(""),d([])}},i?"Cambiar lugar":"Seleccionar lugar"),a&&(0,c.createElement)(n.Modal,{title:"Seleccionar lugar",onRequestClose:k},(0,c.createElement)(n.TextControl,{value:b,onChange:e=>{w(e)},placeholder:"Introduce un término de búsqueda"}),f?(0,c.createElement)(n.Spinner,null):(0,c.createElement)("ul",null,m.map((e=>(0,c.createElement)("li",{key:e.id},(0,c.createElement)(n.Button,{onClick:()=>{return p(a=e),k(),l({selectedContent:a}),void console.log(a);var a}},e.title.rendered)))))))},save:function(e){const{attributes:l}=e,{selectedContent:a}=l;if(a){const{id:e,cmb2:{fp_location_fields:{fp_location_geolocalizacion:{latitude:l,longitude:o}}}}=a,n=t.useBlockProps.save({className:"wa-place-item","data-place-id":`${void 0!==e?e:0}`,"data-place-latitude":`${void 0!==l?l:0}`,"data-place-longitude":`${void 0!==o?o:0}`});return(0,c.createElement)("div",{...n},(0,c.createElement)("div",{className:"wp-block-wa-blocks-core-wa-lugares__item"},(0,c.createElement)("h3",{className:"wp-block-wa-blocks-core-wa-lugares__item--title"},a.title.rendered),(0,c.createElement)("ul",{className:"wp-block-wa-blocks-core-wa-lugares__info"},a.cmb2.fp_location_fields.fp_location_direccion?(0,c.createElement)("li",null,(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--label"},"Dirección:")," ",(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--value"},a.cmb2.fp_location_fields.fp_location_direccion)):null,a.cmb2.fp_location_fields.fp_location_telefono?(0,c.createElement)("li",null,(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--label"},"Teléfono:")," ",(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--value"},a.cmb2.fp_location_fields.fp_location_telefono)):null,a.cmb2.fp_location_fields.fp_location_web||(0,_.isURL)(a.cmb2.fp_location_fields.fp_location_web)?(0,c.createElement)("li",null,(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--label"},"Sitio Web:")," ",(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--value"},(0,c.createElement)("a",{href:a.cmb2.fp_location_fields.fp_location_web,target:"_blank",rel:"noopener"},(0,_.getAuthority)(a.cmb2.fp_location_fields.fp_location_web)))):null,a.cmb2.fp_location_fields.fp_location_social_networks?(0,c.createElement)("li",{className:"wp-block-wa-blocks-core-wa-lugares__social-networks"},(0,c.createElement)("span",{className:"wp-block-wa-blocks-core-wa-lugares__info--label"},"Redes sociales:")," ",a.cmb2.fp_location_fields.fp_location_social_networks.map(((e,l)=>(0,c.createElement)(c.Fragment,null,(0,c.createElement)("a",{className:`wp-block-wa-blocks-core-wa-lugares__info--value wp-block-wa-blocks-core-wa-lugares__social--${e.social}`,href:e.url,target:"_blank",rel:"noopener",key:l},(0,_.getPath)(e.url).replace(/\/$/,""))," ")))):null)),""!==l&&""!==o?(0,c.createElement)("div",{className:"wp-block-wa-blocks-core-wa-lugares__item--button"}," ",(0,c.createElement)("button",{className:"btn btn-primary btn-map"},"Ver en mapa")):null)}}})}},a={};function o(e){var c=a[e];if(void 0!==c)return c.exports;var t=a[e]={exports:{}};return l[e](t,t.exports,o),t.exports}o.m=l,e=[],o.O=(l,a,c,t)=>{if(!a){var n=1/0;for(_=0;_<e.length;_++){for(var[a,c,t]=e[_],r=!0,i=0;i<a.length;i++)(!1&t||n>=t)&&Object.keys(o.O).every((e=>o.O[e](a[i])))?a.splice(i--,1):(r=!1,t<n&&(n=t));if(r){e.splice(_--,1);var s=c();void 0!==s&&(l=s)}}return l}t=t||0;for(var _=e.length;_>0&&e[_-1][2]>t;_--)e[_]=e[_-1];e[_]=[a,c,t]},o.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return o.d(l,{a:l}),l},o.d=(e,l)=>{for(var a in l)o.o(l,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:l[a]})},o.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={4531:0,8459:0};o.O.j=l=>0===e[l];var l=(l,a)=>{var c,t,[n,r,i]=a,s=0;if(n.some((l=>0!==e[l]))){for(c in r)o.o(r,c)&&(o.m[c]=r[c]);if(i)var _=i(o)}for(l&&l(a);s<n.length;s++)t=n[s],o.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return o.O(_)},a=globalThis.webpackChunkwa_blocks_core=globalThis.webpackChunkwa_blocks_core||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))})();var c=o.O(void 0,[8459],(()=>o(347)));c=o.O(c)})();